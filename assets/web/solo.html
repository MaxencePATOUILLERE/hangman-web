<!DOCTYPE html>
<html>
<head>
  <title>Hangman</title>
</head>
<body>
<!-- websockets.html -->
<h1>Solo mode</h1>
<p id="status"></p>
<p id="attempts"></p>
<input id="input" type="text"/>
<button id="button" onclick="send()">Send</button>
<p id="letters">Used letters : </p>
<p id="word"></p>
<script>
  var input = document.getElementById("input");
  var cword = document.getElementById("word");
  var letter = document.getElementById("letters");
  var att = document.getElementById("attempts");
  var socket = new WebSocket("ws://localhost:8080/solo/ws");

  input.addEventListener("keyup", function(event) {
    if (event.keyCode === 13) {
      send();
    }
  });

  socket.onopen = function () {
    console.log("Status: Connected\n");
    document.getElementById("status").innerHTML = "Connected";
    socket.send(": AskInfoSend")
  };

  socket.onclose = function(){
    console.log("Status: Disconected\n");
    document.getElementById("status").innerHTML = "Disconnected";
    alert("Status: Disconected")
  };

  socket.onmessage = function (e) {
    var obj = JSON.parse(e.data);
    letter.innerHTML = "Used letters : "+ obj.Used;
    cword.innerHTML = obj.Word;
    att.innerHTML = obj.Attempts;
    if (obj.Finish){
      input.style.visibility = "hidden";
      document.getElementById("button").style.visibility = "hidden";
    }
  };

  function send() {
    socket.send(input.value);
    input.value = "";
  }
</script>
</body>
</html>
